<!DOCTYPE html>
<html>
<head>
    <title>Test Loans Section Visibility</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Loans Section Visibility Test</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        
        function addResult(message, type) {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }

        // Test 1: Check if loans container exists
        setTimeout(() => {
            const loansContainer = parent.document.querySelector('.loans-container');
            if (loansContainer) {
                addResult('✓ Loans container exists in DOM', 'pass');
                
                // Test 2: Check if it's visible
                const style = window.getComputedStyle(loansContainer);
                if (style.display !== 'none') {
                    addResult('✓ Loans container is not hidden (display !== none)', 'pass');
                } else {
                    addResult('✗ Loans container is hidden (display: none)', 'fail');
                }
                
                // Test 3: Check position
                const rect = loansContainer.getBoundingClientRect();
                addResult(`ℹ Loans container position: top=${rect.top}px, left=${rect.left}px`, 'info');
                
                // Test 4: Check if elements inside exist
                const takeLoanBtn = parent.document.getElementById('takeLoanBtn');
                if (takeLoanBtn) {
                    addResult('✓ Take Loan button exists', 'pass');
                    addResult(`ℹ Button text: "${takeLoanBtn.textContent.trim()}"`, 'info');
                    addResult(`ℹ Button disabled: ${takeLoanBtn.disabled}`, 'info');
                } else {
                    addResult('✗ Take Loan button not found', 'fail');
                }
                
                // Test 5: Check holdings value
                const holdingsValue = parent.document.getElementById('holdingsValue');
                if (holdingsValue) {
                    addResult(`ℹ Holdings Value: ${holdingsValue.textContent}`, 'info');
                } else {
                    addResult('✗ Holdings value element not found', 'fail');
                }
                
                // Test 6: Check max loan amount
                const maxLoanAmount = parent.document.getElementById('maxLoanAmount');
                if (maxLoanAmount) {
                    addResult(`ℹ Max Loan Amount: ${maxLoanAmount.textContent}`, 'info');
                } else {
                    addResult('✗ Max loan amount element not found', 'fail');
                }
                
            } else {
                addResult('✗ Loans container not found in DOM', 'fail');
                addResult('ℹ This test needs to run in the context of app.html', 'info');
            }
        }, 1000);
    </script>
</body>
</html>
