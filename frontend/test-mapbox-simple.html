<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mapbox Test</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <div id="info">
        <h3>Mapbox Test</h3>
        <p id="status">Initializing...</p>
    </div>
    <div id="map"></div>

    <script>
        const statusEl = document.getElementById('status');
        
        console.log('Starting Mapbox test...');
        statusEl.textContent = 'Setting access token...';

        // Set your Mapbox access token
        mapboxgl.accessToken = 'pk.eyJ1IjoiaGVucnlidXRub3RkYW5nZXIiLCJhIjoiY21ncHVmeGx1MjJvdzJrcXc4cXE2YTZpdyJ9.dwV49MrvgHcN9KGbFShVeg';
        
        console.log('Access token set:', mapboxgl.accessToken ? 'Yes' : 'No');
        statusEl.textContent = 'Creating map...';

        try {
            const map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/henrybutnotdanger/cmgqmt1ga001c01sbcdaven4t',
                center: [36.8219, -1.2921], // Nairobi
                zoom: 6
            });

            console.log('Map instance created');
            statusEl.textContent = 'Map created, waiting for load...';

            map.on('load', () => {
                console.log('Map loaded successfully!');
                statusEl.innerHTML = '<strong style="color: green;">✓ Map loaded successfully!</strong>';
                
                // Add a test marker
                new mapboxgl.Marker({ color: '#ef4444' })
                    .setLngLat([36.8219, -1.2921])
                    .setPopup(new mapboxgl.Popup().setHTML('<h3>Nairobi, Kenya</h3>'))
                    .addTo(map);
                
                console.log('Test marker added');
            });

            map.on('error', (e) => {
                console.error('Map error:', e);
                statusEl.innerHTML = '<strong style="color: red;">✗ Error: ' + e.error.message + '</strong>';
            });

        } catch (error) {
            console.error('Error creating map:', error);
            statusEl.innerHTML = '<strong style="color: red;">✗ Error: ' + error.message + '</strong>';
        }
    </script>
</body>
</html>
