# Lending & Liquidity - Complete Guide 💰

## Overview

The Lending & Liquidity section allows you to:
1. **Provide Liquidity** - Deposit USDC to earn interest
2. **Take Loans** - Borrow USDC using your tokens as collateral

Think of it like a **DeFi bank** where you can be both the bank (lender) and the borrower!

## Two Ways to Use It

### Option 1: Be a Lender (Provide Liquidity)
**You have USDC → Deposit it → Earn interest**

### Option 2: Be a Borrower (Take Loan)
**You have tokens → Use as collateral → Borrow USDC**

---

## 1. PROVIDE LIQUIDITY (Be the Bank)

### How It Works:

**Step 1: You Deposit USDC**
```
Your USDC: $10,000
↓
Deposit to Pool: $10,000
↓
Receive: LP Tokens (proof of deposit)
```

**Step 2: Pool Lends to Borrowers**
```
Your $10,000 in pool
↓
Borrowers take loans
↓
Pay interest (e.g., 8% APY)
```

**Step 3: You Earn Interest**
```
Initial Deposit: $10,000
After 1 year: $10,800 (8% APY)
Profit: $800 ✅
```

**Step 4: Withdraw Anytime**
```
Burn LP Tokens
↓
Get back: Original + Interest
↓
Receive: $10,800 USDC
```

### Example Flow:

**Provide Liquidity:**
1. Go to Lending section
2. See "USDC Pool" with APY (e.g., 8%)
3. Click "Provide Liquidity"
4. Enter amount: $5,000
5. Confirm transaction
6. Receive LP tokens
7. Start earning interest immediately

**Your Position:**
```
┌─────────────────────────────────┐
│ Your Liquidity Position         │
├─────────────────────────────────┤
│ Deposited: $5,000               │
│ LP Tokens: 5,000                │
│ Current Value: $5,033           │
│ Earned: $33 (0.66%)             │
│ APY: 8%                         │
│                                 │
│ [Withdraw Liquidity]            │
└─────────────────────────────────┘
```

### Benefits:
- ✅ Earn passive income (8% APY)
- ✅ Withdraw anytime
- ✅ Low risk (backed by collateral)
- ✅ Automatic compounding

---

## 2. TAKE LOANS (Borrow Money)

### How It Works:

**Step 1: You Have Tokens**
```
Your Tokens: 100 tokens in Test Grove
Value: $2,500 (100 × $25)
```

**Step 2: Use as Collateral**
```
Lock 100 tokens as collateral
↓
Can borrow up to 50% of value
↓
Max loan: $1,250
```

**Step 3: Borrow USDC**
```
Borrow: $1,000 USDC
Interest: 8% APY
Collateral: 100 tokens (locked)
```

**Step 4: Use the Money**
```
Borrowed USDC: $1,000
↓
Use for anything:
- Buy more tokens
- Personal expenses
- Other investments
```

**Step 5: Repay Loan**
```
Repay: $1,000 + Interest
↓
Unlock collateral
↓
Get back: 100 tokens
```

### Example Flow:

**Take a Loan:**
1. Go to Lending section
2. Click "Take Loan"
3. Select collateral: 100 tokens from Test Grove
4. Enter loan amount: $1,000
5. See terms:
   - Interest: 8% APY
   - Collateral: 100 tokens (locked)
   - Loan-to-Value: 40%
6. Confirm
7. Receive $1,000 USDC
8. Tokens locked as collateral

**Your Loan:**
```
┌─────────────────────────────────┐
│ Active Loan                     │
├─────────────────────────────────┤
│ Borrowed: $1,000 USDC           │
│ Interest Rate: 8% APY           │
│ Collateral: 100 tokens          │
│ Collateral Value: $2,500        │
│ Loan-to-Value: 40%              │
│ Amount Due: $1,006.67           │
│ Due Date: 11/12/2025            │
│                                 │
│ [Repay Loan]                    │
└─────────────────────────────────┘
```

### Benefits:
- ✅ Get cash without selling tokens
- ✅ Keep earning from harvests
- ✅ Flexible repayment
- ✅ Competitive rates

### Risks:
- ⚠️ Must repay or lose collateral
- ⚠️ Interest accrues over time
- ⚠️ Tokens locked until repayment

---

## Key Concepts

### LP Tokens (Liquidity Provider Tokens)
- **What**: Proof of your deposit in the pool
- **Like**: A receipt or certificate of deposit
- **Value**: Represents your share of the pool
- **Burn**: Exchange back for USDC + interest

### Collateral
- **What**: Tokens you lock to secure a loan
- **Why**: Protects lenders if you don't repay
- **Locked**: Can't sell or transfer while loan active
- **Returned**: When you repay the loan

### Loan-to-Value (LTV)
- **What**: Loan amount ÷ Collateral value
- **Example**: $1,000 loan ÷ $2,500 collateral = 40% LTV
- **Safe**: 40-50% LTV
- **Risky**: 70%+ LTV (liquidation risk)

### APY (Annual Percentage Yield)
- **What**: Interest rate per year
- **Example**: 8% APY on $10,000 = $800/year
- **Compounds**: Interest on interest
- **Variable**: Can change based on demand

---

## Complete Example Scenario

### You Start With:
- 100 tokens in Test Grove (worth $2,500)
- $5,000 USDC

### Strategy 1: Provide Liquidity
```
1. Deposit $5,000 USDC to pool
2. Receive 5,000 LP tokens
3. Earn 8% APY = $400/year
4. After 1 year: Withdraw $5,400
5. Profit: $400 ✅
```

### Strategy 2: Take Loan
```
1. Lock 100 tokens as collateral
2. Borrow $1,000 USDC (40% LTV)
3. Use $1,000 to buy more tokens
4. Now own 140 tokens total
5. Repay loan: $1,066 (after 1 month)
6. Unlock original 100 tokens
7. Net: 40 extra tokens - $66 interest
```

### Strategy 3: Both!
```
1. Provide $5,000 liquidity → Earn 8%
2. Take $1,000 loan → Pay 8%
3. Use loan to buy tokens
4. Earn from:
   - Liquidity interest
   - Token harvest revenue
   - Token appreciation
5. Repay loan from harvest earnings
6. Keep all profits!
```

---

## Lending Pools Available

### USDC Pool:
- **Asset**: USDC stablecoin
- **APY**: 8% (for liquidity providers)
- **Borrow Rate**: 8% (for borrowers)
- **Total Liquidity**: $50,000
- **Available**: $45,000
- **Utilization**: 10%

### How Pool Works:
```
Total Pool: $50,000
├─ Lent Out: $5,000 (earning interest)
└─ Available: $45,000 (ready to lend)

Your Share: $5,000 deposit
= 10% of pool
= Earn 10% of all interest collected
```

---

## Safety Features

### For Lenders:
- ✅ Loans are over-collateralized (150%+)
- ✅ Automatic liquidation if collateral drops
- ✅ Withdraw anytime (if liquidity available)
- ✅ Interest paid automatically

### For Borrowers:
- ✅ Flexible loan amounts
- ✅ Competitive rates
- ✅ Keep token ownership rights
- ✅ Repay early without penalty

---

## Testing the Features

### Test Provide Liquidity:
1. Go to Lending section
2. Click "Provide Liquidity" on USDC pool
3. Enter $1,000
4. Confirm
5. See your LP tokens
6. Watch interest accrue

### Test Take Loan:
1. Make sure you have tokens
2. Click "Take Loan"
3. Select collateral (your tokens)
4. Enter loan amount
5. Confirm
6. Receive USDC
7. See active loan details

### Test Repay:
1. Have active loan
2. Click "Repay Loan"
3. See amount due (principal + interest)
4. Confirm repayment
5. Collateral unlocked
6. Tokens returned to you

---

## Summary

**Lending & Liquidity = DeFi Banking**

**As Lender:**
- Deposit USDC → Earn 8% APY → Withdraw anytime

**As Borrower:**
- Lock tokens → Borrow USDC → Repay to unlock

**Benefits:**
- Earn passive income
- Access liquidity without selling
- Flexible and decentralized
- Backed by real coffee grove tokens

It's like a bank, but you control everything! 🏦☕
